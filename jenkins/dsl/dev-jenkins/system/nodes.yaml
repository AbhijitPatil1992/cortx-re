# CAUSTION : This configuration applys as remove -> add method so cloud or perment node added by manual config will be wiped out.

jenkins:
  # Permenent Nodes
  nodes:
  - permanent:
      name: "docker-build-node-7.7.1908"
      labelString: "docker-build-node-7.7.1908"
      launcher:
        ssh:
          credentialsId: "bb694996-b19f-4f1a-8686-46cc9ba7d120"
          host: "ssc-vm-0034.colo.seagate.com"
          port: 22
          sshHostKeyVerificationStrategy: "nonVerifyingKeyVerificationStrategy"
          workDir: "/home/736373/workspace/jenkins_workspace"
      numExecutors: 3
      remoteFS: "/home/736373/workspace/jenkins_workspace"
      retentionStrategy: "always"
  - permanent:
      name: "docker-build-node-rhel-7.7"
      labelString: "docker-build-node-rhel-7.7"
      launcher:
        ssh:
          credentialsId: "bb694996-b19f-4f1a-8686-46cc9ba7d120"
          host: "ssc-vm-c-283.colo.seagate.com"
          port: 22
          sshHostKeyVerificationStrategy: "nonVerifyingKeyVerificationStrategy"
          workDir: "/home/736373/workspace/jenkins_workspace"
      numExecutors: 3
      remoteFS: "/home/736373/workspace/jenkins_workspace"
      retentionStrategy: "always"
  - permanent:
      labelString: "eos-open-source-node"
      name: "eos-open-source-node"
      launcher:
        ssh:
          credentialsId: "697b86de-97d2-46de-beb9-f6127359ffb1"
          host: "10.230.243.230"
          port: 22
          sshHostKeyVerificationStrategy: "nonVerifyingKeyVerificationStrategy"
      mode: EXCLUSIVE
      nodeProperties:
      - "disableDeferredWipeout"
      remoteFS: "/home/740272/"
      retentionStrategy: "always"
  - permanent:
      name: "github-automation"
      labelString: "github-automation"
      launcher:
        ssh:
          credentialsId: "bb694996-b19f-4f1a-8686-46cc9ba7d120"
          host: "ssc-vm-c-234.colo.seagate.com"
          port: 8057
          sshHostKeyVerificationStrategy: "nonVerifyingKeyVerificationStrategy"
      numExecutors: 1
      remoteFS: "/var/jenkins"
      retentionStrategy: "always"
  - permanent:
      name: "github-opensource"
      labelString: "github-opensource"
      launcher:
        ssh:
          credentialsId: "57eee590-0523-4a7a-b37c-eea630208738"
          host: "10.230.247.14"
          port: 22
          sshHostKeyVerificationStrategy: "nonVerifyingKeyVerificationStrategy"
      mode: EXCLUSIVE
      nodeProperties:
      - "disableDeferredWipeout"
      remoteFS: "/home/740519"
      retentionStrategy: "always"
  # Docker Cloud Nodes
  clouds:
  - docker:
      name: "Component Build : CENTOS-7.7.1908 : ssc-vm-0034.colo.seagate.com"
      dockerApi:
        dockerHost:
          uri: "tcp://ssc-vm-0034.colo.seagate.com:4243"
        readTimeout: 60
        connectTimeout: 60
      templates:
      - name: "docker-rpm-sign-node"
        labelString: "docker-rpm-sign-node"
        dockerTemplateBase:
          image: "ssc-vm-0279.colo.seagate.com:5000/centos_eos:7.7.1908"
          privileged: true
          tty: true
          volumes:
            - /mnt/data1:/mnt/data1
            - /mnt/bigstorage:/mnt/bigstorage
        remoteFs: "/var/jenkins/"
        mode: EXCLUSIVE
        pullTimeout: 300
        retentionStrategy:
          idleMinutes: 60
        connector:
          ssh:
            sshKeyStrategy:
              manuallyConfiguredSSHKey:
                credentialsId: "bb694996-b19f-4f1a-8686-46cc9ba7d120"
                sshHostKeyVerificationStrategy: "nonVerifyingKeyVerificationStrategy"
      - name: "docker-nightly-node"
        labelString: "docker-nightly-node"
        dockerTemplateBase:
          image: "ssc-vm-0279.colo.seagate.com:5000/centos_eos:7.7.1908"
          privileged: true
          tty: true
          volumes:
            - "/mnt/bigstorage:/mnt/bigstorage"
            - "/mnt/data1:/mnt/data1"
        remoteFs: "/var/jenkins/"
        mode: EXCLUSIVE
        pullTimeout: 300
        retentionStrategy:
          idleMinutes: 60
        connector:
          ssh:
            sshKeyStrategy:
              manuallyConfiguredSSHKey:
                credentialsId: "bb694996-b19f-4f1a-8686-46cc9ba7d120"
                sshHostKeyVerificationStrategy: "nonVerifyingKeyVerificationStrategy"  
      - name: "docker-centos7.7.1908-prvsnr-node"
        labelString: "docker-centos7.7.1908-prvsnr-new-node docker-centos7.7.1908-prvsnr-premerge-node docker-centos7.7.1908-prvsnr-github-node"
        dockerTemplateBase:
          image: "ssc-vm-0279.colo.seagate.com:5000/centos_eos:7.7.1908"
          volumes:
            - "/mnt/bigstorage:/mnt/bigstorage"
            - "/mnt/data1:/mnt/data1"
        remoteFs: "/var/jenkins/"
        mode: EXCLUSIVE
        pullTimeout: 300
        retentionStrategy:
          idleMinutes: 60
        connector:
          ssh:
            sshKeyStrategy:
              manuallyConfiguredSSHKey:
                credentialsId: "bb694996-b19f-4f1a-8686-46cc9ba7d120"
                sshHostKeyVerificationStrategy: "nonVerifyingKeyVerificationStrategy"
      - name: "docker-centos7.7.1908-sspl-node"
        labelString: "docker-centos7.7.1908-sspl-new-node docker-centos7.7.1908-sspl-premerge-node docker-centos7.7.1908-sspl-github-node"
        dockerTemplateBase:
          image: "ssc-vm-0279.colo.seagate.com:5000/centos_eos:7.7.1908"
          volumes:
            - "/mnt/bigstorage:/mnt/bigstorage"
            - "/mnt/data1:/mnt/data1"
        remoteFs: "/var/jenkins/"
        mode: EXCLUSIVE
        pullTimeout: 300
        retentionStrategy:
          idleMinutes: 60
        connector:
          ssh:
            sshKeyStrategy:
              manuallyConfiguredSSHKey:
                credentialsId: "bb694996-b19f-4f1a-8686-46cc9ba7d120"
                sshHostKeyVerificationStrategy: "nonVerifyingKeyVerificationStrategy"
      - name: "docker-centos7.7.1908-csm-node"
        labelString: "docker-centos7.7.1908-csm-new-node docker-centos7.7.1908-csm-premerge-node docker-centos7.7.1908-csm-github-node"
        dockerTemplateBase:
          image: "ssc-vm-0279.colo.seagate.com:5000/csm-systemd:7.7.1908"
          privileged: true
          volumes:
          - "/sys/fs/cgroup:/sys/fs/cgroup:ro"
          - "/mnt/bigstorage:/mnt/bigstorage"
          - "/mnt/data1:/mnt/data1"
        remoteFs: "/var/jenkins/"
        mode: EXCLUSIVE
        pullTimeout: 300
        retentionStrategy:
          idleMinutes: 60
        connector:
          ssh:
            sshKeyStrategy:
              manuallyConfiguredSSHKey:
                credentialsId: "bb694996-b19f-4f1a-8686-46cc9ba7d120"
                sshHostKeyVerificationStrategy: "nonVerifyingKeyVerificationStrategy"
      - name: "docker-centos7.7.1908-nfs-node"
        labelString: "docker-centos7.7.1908-nfs-new-node docker-centos7.7.1908-nfs-premerge-node docker-centos7.7.1908-nfs-github-node"
        dockerTemplateBase:
          image: "ssc-vm-0279.colo.seagate.com:5000/nfs:7.7.1908"
          privileged: true
          tty: true
          volumes:
          - "/mnt/bigstorage:/mnt/bigstorage"
          - "/mnt/data1:/mnt/data1"        
        remoteFs: "/var/jenkins/"
        mode: EXCLUSIVE
        pullTimeout: 300
        retentionStrategy:
          idleMinutes: 60
        connector:
          ssh:
            sshKeyStrategy:
              manuallyConfiguredSSHKey:
                credentialsId: "bb694996-b19f-4f1a-8686-46cc9ba7d120"
                sshHostKeyVerificationStrategy: "nonVerifyingKeyVerificationStrategy"
      - name: "docker-centos7.7.1908-mero-node"
        labelString: "docker-centos7.7.1908-mero-new-node docker-centos7.7.1908-mero-premerge-node docker-centos7.7.1908-mero-github-node"
        dockerTemplateBase:
          image: "ssc-vm-0279.colo.seagate.com:5000/mero:7.7.1908"
          volumes:
          - "/mnt/bigstorage:/mnt/bigstorage"
          - "/mnt/data1:/mnt/data1"
        remoteFs: "/var/jenkins/"
        mode: EXCLUSIVE
        pullTimeout: 300
        retentionStrategy:
          idleMinutes: 60
        connector:
          ssh:
            sshKeyStrategy:
              manuallyConfiguredSSHKey:
                credentialsId: "bb694996-b19f-4f1a-8686-46cc9ba7d120"
                sshHostKeyVerificationStrategy: "nonVerifyingKeyVerificationStrategy"
      - name: "docker-centos7.7.1908-s3-node"
        labelString: "docker-centos7.7.1908-s3-new-node docker-centos7.7.1908-s3-premerge-node docker-centos7.7.1908-s3-github-node"
        dockerTemplateBase:
          image: "ssc-vm-0279.colo.seagate.com:5000/s3:7.7.1908"
          volumes:
          - "/mnt/bigstorage:/mnt/bigstorage"
          - "/mnt/data1:/mnt/data1"
        remoteFs: "/var/jenkins/"
        mode: EXCLUSIVE
        pullTimeout: 300
        retentionStrategy:
          idleMinutes: 60
        connector:
          ssh:
            sshKeyStrategy:
              manuallyConfiguredSSHKey:
                credentialsId: "bb694996-b19f-4f1a-8686-46cc9ba7d120"
                sshHostKeyVerificationStrategy: "nonVerifyingKeyVerificationStrategy"
      - name: "docker-centos7.7.1908-hare-node"
        labelString: "docker-centos7.7.1908-hare-new-node docker-centos7.7.1908-hare-premerge-node docker-centos7.7.1908-hare-github-node"
        dockerTemplateBase:
          image: "ssc-vm-0279.colo.seagate.com:5000/hare:7.7.1908"
          volumes:
          - "/mnt/bigstorage:/mnt/bigstorage"
          - "/mnt/data1:/mnt/data1"
        remoteFs: "/var/jenkins/"
        mode: EXCLUSIVE
        pullTimeout: 300
        retentionStrategy:
          idleMinutes: 60
        connector:
          ssh:
            sshKeyStrategy:
              manuallyConfiguredSSHKey:
                credentialsId: "bb694996-b19f-4f1a-8686-46cc9ba7d120"
                sshHostKeyVerificationStrategy: "nonVerifyingKeyVerificationStrategy"
  - docker:
      name: "Component Build : RHEL-7.7 : ssc-vm-c-283.colo.seagate.com"
      dockerApi:
        dockerHost:
          uri: "tcp://ssc-vm-c-283.colo.seagate.com:4243"
        readTimeout: 60
        connectTimeout: 60
      templates:
      - name: "docker-rhel7.7-hare-node"
        labelString: "docker-rhel7.7.1908-hare-new-node"
        dockerTemplateBase:
          image: "ssc-vm-0034.colo.seagate.com:5000/rhel_hare:7.7.1908"
          volumes:
          - "/mnt/data1:/mnt/data1"
          - "/mnt/bigstorage:/mnt/bigstorage"
        remoteFs: "/var/jenkins/"
        mode: EXCLUSIVE
        pullTimeout: 300
        retentionStrategy:
          idleMinutes: 60
        connector:
          ssh:
            sshKeyStrategy:
              manuallyConfiguredSSHKey:
                credentialsId: "bb694996-b19f-4f1a-8686-46cc9ba7d120"
                sshHostKeyVerificationStrategy: "nonVerifyingKeyVerificationStrategy"
      - name: "docker-rhel7.7-mero-node"
        labelString: "docker-rhel7.7-mero-new-node"
        dockerTemplateBase:
          image: "ssc-vm-0034.colo.seagate.com:5000/rhel_mero:7.7.1908"
          volumes:
          - "/mnt/data1:/mnt/data1"
          - "/mnt/bigstorage:/mnt/bigstorage"
        remoteFs: "/var/jenkins/"
        mode: EXCLUSIVE
        pullTimeout: 300
        retentionStrategy:
          idleMinutes: 60
        connector:
          ssh:
            sshKeyStrategy:
              manuallyConfiguredSSHKey:
                credentialsId: "bb694996-b19f-4f1a-8686-46cc9ba7d120"
                sshHostKeyVerificationStrategy: "nonVerifyingKeyVerificationStrategy"
      - name: "docker-rhel7.7-csm-node"
        labelString: "docker-rhel.7.1908-csm-new-node" 
        dockerTemplateBase:
          image: "ssc-vm-0034.colo.seagate.com:5000/rhel_csm:7.7.1908"
          volumes:
          - "/mnt/data1:/mnt/data1"
          - "/mnt/bigstorage:/mnt/bigstorage/"
        remoteFs: "/var/jenkins/"
        mode: EXCLUSIVE
        pullTimeout: 300
        retentionStrategy:
          idleMinutes: 60
        connector:
          ssh:
            sshKeyStrategy:
              manuallyConfiguredSSHKey:
                credentialsId: "bb694996-b19f-4f1a-8686-46cc9ba7d120"
                sshHostKeyVerificationStrategy: "nonVerifyingKeyVerificationStrategy"
      - name: "docker-rhel7.7-prvsnr-node"
        labelString: "docker-rhel7.7.1908-prvsnr-new-node"
        dockerTemplateBase:
          image: "ssc-vm-0034.colo.seagate.com:5000/rhel_eos:7.7.1908"
          volumes:
          - "/mnt/data1:/mnt/data1"
          - "/mnt/bigstorage:/mnt/bigstorage"
        remoteFs: "/var/jenkins/"
        mode: EXCLUSIVE
        pullTimeout: 300
        retentionStrategy:
          idleMinutes: 60
        connector:
          ssh:
            sshKeyStrategy:
              manuallyConfiguredSSHKey:
                credentialsId: "bb694996-b19f-4f1a-8686-46cc9ba7d120"
                sshHostKeyVerificationStrategy: "nonVerifyingKeyVerificationStrategy"
      - name: "docker-rhel7.7-nfs-node"
        labelString: "docker-rhel.7.1908-nfs-new-node"
        dockerTemplateBase:
          image: "ssc-vm-0034.colo.seagate.com:5000/rhel_nfs:7.7.1908"
          volumes:
          - "/mnt/data1:/mnt/data1"
          - "/mnt/bigstorage:/mnt/bigstorage"
        remoteFs: "/var/jenkins/"
        mode: EXCLUSIVE
        pullTimeout: 300
        retentionStrategy:
          idleMinutes: 60
        connector:
          ssh:
            sshKeyStrategy:
              manuallyConfiguredSSHKey:
                credentialsId: "bb694996-b19f-4f1a-8686-46cc9ba7d120"
                sshHostKeyVerificationStrategy: "nonVerifyingKeyVerificationStrategy"
      - name: "docker-rhel7.7-s3-node"
        labelString: "docker-rhel.7.7.1908-s3-new-node"
        dockerTemplateBase:
          image: "ssc-vm-0034.colo.seagate.com:5000/rhel_s3:7.7.1908"
          volumes:
          - "/mnt/data1:/mnt/data1"
          - "/mnt/bigstorage:/mnt/bigstorage"
        remoteFs: "/var/jenkins/"
        mode: EXCLUSIVE
        pullTimeout: 300
        retentionStrategy:
          idleMinutes: 60
        connector:
          ssh:
            sshKeyStrategy:
              manuallyConfiguredSSHKey:
                credentialsId: "bb694996-b19f-4f1a-8686-46cc9ba7d120"
                sshHostKeyVerificationStrategy: "nonVerifyingKeyVerificationStrategy"
      - name: "docker-rhel7.7-sspl-node"
        labelString: "docker-rhel.7.1908-sspl-new-node"
        dockerTemplateBase:
          image: "ssc-vm-0034.colo.seagate.com:5000/rhel_eos:7.7.1908"
          volumes:
          - "/mnt/data1:/mnt/data1"
          - "/mnt/bigstorage:/mnt/bigstorage"
        remoteFs: "/var/jenkins/"
        mode: EXCLUSIVE
        pullTimeout: 300
        retentionStrategy:
          idleMinutes: 60
        connector:
          ssh:
            sshKeyStrategy:
              manuallyConfiguredSSHKey:
                credentialsId: "bb694996-b19f-4f1a-8686-46cc9ba7d120"
                sshHostKeyVerificationStrategy: "nonVerifyingKeyVerificationStrategy"
      - name: "docker-rhel7.7-uds-node"
        labelString: "docker-rhel7.7.1908-uds-new-node"
        dockerTemplateBase:
          image: "ssc-vm-0034.colo.seagate.com:5000/rhel_eos:7.7.1908"
          volumes:
          - "/mnt/data1:/mnt/data1"
          - "/mnt/bigstorage:/mnt/bigstorage"
        remoteFs: "/var/jenkins/"
        mode: EXCLUSIVE
        pullTimeout: 300
        retentionStrategy:
          idleMinutes: 60
        connector:
          ssh:
            sshKeyStrategy:
              manuallyConfiguredSSHKey:
                credentialsId: "bb694996-b19f-4f1a-8686-46cc9ba7d120"
                sshHostKeyVerificationStrategy: "nonVerifyingKeyVerificationStrategy"
  - dockerSwarm:
      agentTemplates:
      - command: |-
          sh
          -cx
          curl --connect-timeout 20 --max-time 60 -o agent.jar $DOCKER_SWARM_PLUGIN_JENKINS_AGENT_JAR_URL && java -jar agent.jar -jnlpUrl $DOCKER_SWARM_PLUGIN_JENKINS_AGENT_JNLP_URL -secret $DOCKER_SWARM_PLUGIN_JENKINS_AGENT_SECRET -noReconnect -workDir /tmp
        image: "github/gl-exporter"
        label: "opensource-docker-node"
        limitsMemoryBytes: 0
        limitsNanoCPUs: 0
        osWindows: false
        reservationsMemoryBytes: 0
        reservationsNanoCPUs: 0
        workingDir: "/tmp"
      dockerHost:
        uri: "http://ssc-vm-c-234.colo.seagate.com:2376"
      dockerSwarmApiUrl: "http://ssc-vm-c-234.colo.seagate.com:2376"
      jenkinsUrl: "http://ssc-vm-0013.colo.seagate.com/"
  - dockerSwarm:
      agentTemplates:
      - command: |-
          sh
          -cx
          curl --connect-timeout 20 --max-time 60 -o agent.jar $DOCKER_SWARM_PLUGIN_JENKINS_AGENT_JAR_URL && java -jar agent.jar -jnlpUrl $DOCKER_SWARM_PLUGIN_JENKINS_AGENT_JNLP_URL -secret $DOCKER_SWARM_PLUGIN_JENKINS_AGENT_SECRET -noReconnect -workDir /tmp
        image: "java:8"
        label: "docker-agent"
        limitsMemoryBytes: 0
        limitsNanoCPUs: 0
        osWindows: false
        reservationsMemoryBytes: 0
        reservationsNanoCPUs: 0
        workingDir: "/tmp"
      dockerHost:
        uri: "http://ssc-vm-0034.colo.seagate.com:4243"
      dockerSwarmApiUrl: "http://ssc-vm-0034.colo.seagate.com:4243"
      jenkinsUrl: "http://ssc-vm-0013.colo.seagate.com/"
